$ink:#1b1b1b;
$seal:#b91c1c;
$gold:#c9a24a;

:root{ --dur:650ms; --bezier:cubic-bezier(.2,.7,.2,1); }

html,body,#root{
  height:100%;
  background:radial-gradient(1200px 800px at 50% -10%, #faf7f0, #f1ede4 55%, #e7e0d3);
}
body{color:$ink;font-family:"Noto Serif KR",serif;}

.start{
  display:grid;
  place-items:center;
  min-height:calc(100vh - 120px);
  text-align:center;

  &__hint{margin-top:18px;font-size:14px;color:rgba(0,0,0,.55);}
  &__credit{margin-top:6px;font-size:12px;color:rgba(0,0,0,.35);}
}

/* -------------------------------------- */
/* 📘 두꺼운 책 효과 핵심 파라미터 */
/* -------------------------------------- */
$thick: 90px;
$radius: 14px;

.book{
  width:min(560px,88vw);
  aspect-ratio:3/4;
  position:relative;
  perspective:1200px;
  filter:drop-shadow(0 22px 48px rgba(0,0,0,.18));
  transition:filter .25s ease;
  &:hover{ filter:drop-shadow(0 28px 60px rgba(0,0,0,.25)); }

  &::after{
    content:"";
    position:absolute;
    left:8%; right:8%; bottom:-18px;
    height:22px; border-radius:50%;
    background:radial-gradient(60% 100% at 50% 100%, rgba(0,0,0,.25), transparent 70%);
    filter:blur(6px);
  }
}

/* -------------------------------------- */
/* 표지 + 옆면 구조 */
/* -------------------------------------- */
.book__cover{
  position:absolute; inset:0;
  border-radius:$radius;
  background:linear-gradient(120deg,#faf6eb 0%,#f3eee1 55%,#eae2d0 100%);
  box-shadow:
    inset 0 0 0 2px rgba(201,162,74,.75),
    inset 0 0 0 3px rgba(255,255,255,.35),
    0 6px 14px rgba(0,0,0,.08);
  display:grid; place-items:center;
  overflow:hidden;
  will-change:transform;
  transform-style:preserve-3d;
  transform:translateZ(calc(#{$thick}/2)); /* 표지는 항상 맨 앞 */
  transition:transform .7s var(--bezier);
  backface-visibility:hidden;
  z-index:20;

  /* 오른쪽 옆면 */
  &::after{
    content:"";
    position:absolute; top:0; right:-0.5px;
    width:$thick; height:100%;
    transform-origin:right center;
    transform:rotateY(90deg) translateZ(-2px) scaleX(0.00001);
    opacity:0; visibility:hidden;
    transition:
      transform .35s var(--bezier),
      opacity .3s ease-in-out,
      visibility .3s ease-in-out;
    border-radius:0 $radius $radius 0;
    background:repeating-linear-gradient(180deg,#fff 0 2px,#f3f3f3 2px 4px);
    box-shadow:inset 8px 0 10px rgba(0,0,0,.06);
    z-index:10; backface-visibility:hidden; pointer-events:none;
  }

  /* 왼쪽 책등 (항상 숨김) */
  &::before{
    content:"";
    position:absolute; top:0; left:-0.5px;
    width:$thick; height:100%;
    transform-origin:left center;
    transform:rotateY(-90deg) translateZ(-2px) scaleX(0.00001);
    opacity:0; visibility:hidden;
    border-radius:$radius 0 0 $radius;
    background:linear-gradient(180deg,#d9ccb2 0%,#c8b894 60%,#bdae8a 100%);
    box-shadow:inset -6px 0 10px rgba(0,0,0,.18);
    z-index:10; backface-visibility:hidden; pointer-events:none;
  }
}

/* -------------------------------------- */
/* hover: 표지는 그대로, 오른쪽 옆면만 뒤에서 드러남 */
/* -------------------------------------- */
.book:hover .book__cover{
  transform:translateZ(calc(#{$thick}/2)) rotateY(-20deg);
}
.book:hover .book__cover::after{
  transform:rotateY(90deg) translateZ(-2px) scaleX(1);
  opacity:1; visibility:visible;
}

/* -------------------------------------- */
/* 내부 텍스트 */
/* -------------------------------------- */
.book__ribbon{
  position:absolute; left:22px; top:18px;
  padding:6px 12px; font-size:12px;
  color:#fff; background:$seal;
  border-radius:6px;
  box-shadow:0 6px 12px rgba(185,28,28,.25);
}
.book__title{
  font-weight:800;
  font-size:clamp(28px,4.6vw,42px);
  letter-spacing:4px;
  color:#1f2a44;
  margin:0 0 10px;
  text-align:center;
}
.book__subtitle{
  font-size:clamp(16px,3.6vw,22px);
  margin:6px 0 18px;
  color:rgba(0,0,0,.7);
}
.book__meta{
  font-size:14px;
  color:rgba(0,0,0,.55);
  margin-top:40px;
}
.book__seal{
  position:absolute; right:26px; bottom:22px;
  width:74px; height:74px; border-radius:6px;
  background:radial-gradient(18px 12px at 65% 35%, rgba(255,255,255,.25), transparent 60%), #be2323;
  color:#fff; font-weight:700; display:grid; place-items:center;
  transform:rotate(-8deg);
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.25), 0 10px 18px rgba(0,0,0,.22);
  font-size:14px; letter-spacing:2px;
}
.book__sealImg { width: 100%; height: 100%; object-fit: cover; display: block; }

/* -------------------------------------- */
/* 클릭 애니메이션 */
/* -------------------------------------- */
.book--leave{ animation:bookLeave var(--dur) var(--bezier) forwards; }
@keyframes bookLeave{
  0%{transform:translateY(0) scale(1); opacity:1;}
  60%{transform:translateY(2px) scale(.96); opacity:.35;}
  100%{transform:translateY(6px) scale(.94); opacity:0;}
}